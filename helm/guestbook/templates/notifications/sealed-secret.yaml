
# =============================================================================
# ArgoCD Notifications - Sealed Secret
# =============================================================================
# Stores the Discord Webhook URL securely.
# =============================================================================
{{- if .Values.notifications.enabled }}
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: argocd-notifications-secret
  namespace: argocd  # Must be in argocd namespace
spec:
  encryptedData:
    discord-webhook-url: {{ .Values.notifications.discord.encryptedWebhookUrl }}
  template:
    metadata:
      name: argocd-notifications-secret
      namespace: argocd
      labels:
        app.kubernetes.io/part-of: argocd
        app.kubernetes.io/managed-by: helm
    type: Opaque
{{- end }}
